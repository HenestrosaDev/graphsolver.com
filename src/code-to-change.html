<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<title data-i18n="pageTitle">
			Herramienta Grafos Completa: Floyd, Dijkstra & MST
		</title>
		<link rel="stylesheet" href="styles.css" />
	</head>
	<body>
		<h1 data-i18n="title">Herramienta Grafos Completa</h1>

		<div class="global-controls">
			<label data-i18n="vertices">Vértices:</label>
			<input type="number" id="numNodes" value="4" min="2" max="26" />
			<label data-i18n="language">Idioma:</label>
			<select id="languageSelect" onchange="changeLanguage()">
				<option value="es">Español</option>
				<option value="en">English</option>
			</select>
			<button class="primary" onclick="createGrid()" data-i18n="createMatrix">
				Crear Matriz
			</button>
		</div>

		<div id="main-interface" style="display: none">
			<div id="matrix-wrapper">
				<div
					style="
						display: flex;
						justify-content: space-between;
						align-items: center;
					"
				>
					<h3 data-i18n="inputMatrix">Matriz de Entrada</h3>
					<div class="options-bar">
						<label class="checkbox-wrapper">
							<input
								type="checkbox"
								id="zeroAsNull"
								checked
								onchange="updateUI()"
							/>
							<span data-i18n="interpretZero"
								>Interpretar '0' como "Sin Conexión"</span
							>
						</label>
					</div>
				</div>
				<p>
					<small data-i18n="emptyCell">Casilla vacía = Sin conexión.</small>
				</p>
				<div id="matrix-container"></div>
			</div>

			<div class="tab-container">
				<button
					class="tab-button active"
					onclick="openTab(event, 'Solver')"
					data-i18n="dijkstra"
				>
					Dijkstra
				</button>
				<button
					class="tab-button"
					onclick="openTab(event, 'Floyd')"
					data-i18n="floyd"
				>
					Floyd-Warshall
				</button>
				<button
					class="tab-button"
					onclick="openTab(event, 'MST')"
					data-i18n="mst"
				>
					Árbol Mínimo (MST)
				</button>
				<button
					class="tab-button"
					onclick="openTab(event, 'Properties')"
					data-i18n="properties"
				>
					Propiedades
				</button>
				<button
					class="tab-button"
					onclick="openTab(event, 'Latex')"
					data-i18n="latex"
				>
					Generar LaTeX
				</button>
			</div>

			<div id="Solver" class="tab-content" style="display: block">
				<div style="margin-bottom: 20px">
					<label data-i18n="origin">Origen: </label>
					<input
						type="text"
						id="startNode"
						value="A"
						style="width: 30px; text-transform: uppercase"
					/>
					<label data-i18n="destination">Destino: </label>
					<input
						type="text"
						id="endNode"
						value="D"
						style="width: 30px; text-transform: uppercase"
					/>
					<button
						class="primary"
						onclick="solveDijkstra()"
						data-i18n="calculatePath"
					>
						Calcular Camino
					</button>
				</div>
				<div id="results-area" style="display: none">
					<table
						id="stepsTable"
						style="width: 100%; border-collapse: collapse; margin-top: 10px"
					>
						<thead>
							<tr id="stepsHeader" style="background: #e9ecef"></tr>
						</thead>
						<tbody id="stepsBody"></tbody>
					</table>
					<div class="result-box">
						<p>
							<strong data-i18n="minCost">Coste Mínimo:</strong>
							<span id="finalCost">-</span>
						</p>
						<p>
							<strong data-i18n="path">Camino:</strong>
							<span id="finalPath">-</span>
						</p>
					</div>
				</div>
			</div>

			<div id="Floyd" class="tab-content">
				<p data-i18n="floydDesc">
					Calcula todos los caminos mínimos entre pares y el diámetro del grafo.
				</p>
				<button class="info" onclick="solveFloyd()" data-i18n="calculateFloyd">
					Calcular Pasos Floyd
				</button>

				<div id="floyd-results" style="display: none; margin-top: 20px">
					<div class="result-box" style="margin-bottom: 20px">
						<h3 style="margin-top: 0" data-i18n="queriesDiameter">
							Consultas y Diámetro
						</h3>
						<div class="prop-grid">
							<div class="prop-item">
								<span class="prop-label" data-i18n="graphDiameter">
									Diámetro del Grafo
								</span>
								<span class="prop-value" id="floyd-diameter">-</span>
							</div>
							<div class="prop-item">
								<span class="prop-label" data-i18n="queryPath">
									Consultar Camino:
									<span>
										<select
											id="floydStart"
											class="mini-select"
											onchange="queryFloydPath()"
										></select>
										➜
										<select
											id="floydEnd"
											class="mini-select"
											onchange="queryFloydPath()"
										></select>
									</span>
								</span>
								<div style="margin-top: 10px">
									<div data-i18n="distance">
										Distancia: <strong id="floyd-query-dist">-</strong>
									</div>
									<div data-i18n="path">
										Camino:
										<strong
											id="floyd-query-path"
											style="font-family: monospace; color: #007bff"
											>-</strong
										>
									</div>
								</div>
							</div>
						</div>
					</div>

					<h3 data-i18n="stepMatrices">Matrices de Pasos (Iteraciones)</h3>
					<div id="floyd-steps-container"></div>
				</div>
			</div>

			<div id="MST" class="tab-content">
				<button class="warning" onclick="solveMST()" data-i18n="calculateMST">
					Calcular MST
				</button>
				<div id="mst-results" style="display: none" class="result-box">
					<div class="prop-item">
						<span class="prop-label" data-i18n="totalMinCost">
							Coste Mínimo Total
						</span>
						<span class="prop-value" id="mst-cost">-</span>
					</div>
					<div class="prop-item">
						<span class="prop-label" data-i18n="edgesSolution">
							Aristas (Formato Solución)
						</span>
						<span class="prop-value" id="mst-edges">-</span>
						<button
							class="secondary"
							style="margin-top: 5px; font-size: 0.8em"
							onclick="copyToClipboard('mst-edges')"
							data-i18n="copy"
						>
							Copiar
						</button>
					</div>
					<div class="prop-item">
						<span class="prop-label" data-i18n="uniqueMST">
							¿Existe otro MST distinto?
						</span>
						<span class="prop-value" id="mst-unique">-</span>
					</div>
				</div>
			</div>

			<div id="Properties" class="tab-content">
				<button
					class="success"
					style="color: white"
					onclick="calculateProperties()"
					data-i18n="updateAnalysis"
				>
					Actualizar Análisis
				</button>
				<hr />
				<div id="type-alert" class="alert-info" style="display: none"></div>
				<div class="prop-grid">
					<div>
						<div class="prop-item">
							<span class="prop-label" data-i18n="order">Orden</span
							><span class="prop-value" id="prop-orden">-</span>
						</div>
						<div class="prop-item">
							<span class="prop-label" data-i18n="size">Medida</span
							><span class="prop-value" id="prop-medida">-</span>
						</div>
						<div class="prop-item">
							<span class="prop-label" data-i18n="adjacentTo"
								>Adyacentes a:
								<select
									id="adjTargetSelector"
									class="mini-select"
									onchange="calculateProperties()"
								></select
							></span>
							<span class="prop-value" id="prop-adj">-</span>
						</div>
						<div class="prop-item">
							<span class="prop-label" data-i18n="degreeSequence"
								>Secuencia Grados</span
							><span class="prop-value" id="prop-seq">-</span>
						</div>
					</div>
					<div>
						<div class="prop-item">
							<span class="prop-label" data-i18n="isolated">Aislados</span
							><span class="prop-value" id="prop-iso">-</span>
						</div>
						<div class="prop-item">
							<span class="prop-label" data-i18n="connectedComponents"
								>Componentes Conexas</span
							><span class="prop-value" id="prop-cc">-</span>
						</div>
						<div class="prop-item">
							<span class="prop-label" data-i18n="sizeComp">Medida Comp.</span
							><span class="prop-value" id="prop-comp-size">-</span>
						</div>
						<div class="prop-item">
							<span class="prop-label" data-i18n="compComplement"
								>CC Complementario</span
							><span class="prop-value" id="prop-comp-cc">-</span>
						</div>
					</div>
				</div>
			</div>

			<div id="Latex" class="tab-content">
				<button
					class="success"
					onclick="generateLatex()"
					data-i18n="generateLatex"
				>
					Generar LaTeX
				</button>
				<button
					class="secondary"
					onclick="copyToClipboard('latexOutput', true)"
					data-i18n="copyToClipboard"
				>
					Copiar al Portapapeles
				</button>
				<textarea
					id="latexOutput"
					style="width: 100%; height: 200px; margin-top: 10px"
				></textarea>
			</div>
		</div>

		<div id="toast" data-i18n="copied">¡Copiado al portapapeles!</div>

		<script src="script.js"></script>
	</body>
</html>
